if(!customElements.get("collection-tabs")){class t extends HTMLElement{constructor(){super(),this.selectors={images:[".m-collection-tab__image"],collapsibleTabs:["collapsible-tab"]}}init(){this.domNodes=queryDomNodes(this.selectors,this),this.isPausing=!1,this.autoplay=!(!this.dataset.autoplay||"true"!==this.dataset.autoplay),this.autoplayDuration=this.dataset.autoplayDuration?parseInt(this.dataset.autoplayDuration):5,this.autoplayTimer=null,this.tabActiveIndex=0,this.totalTabs=this.domNodes.collapsibleTabs.length,this.hoverToOpen=!(!this.dataset.triggerBehavior||"hover"!==this.dataset.triggerBehavior||!window.matchMedia("(hover: hover)").matches)}connectedCallback(){this.init(),this.autoplay&&(this.style.setProperty("--autoplay-duration",this.autoplayDuration+"s"),this.initAutoplay(),window.MinimogEvents.subscribe("ON_COLLAPSIBLE_TAB_OPENED",(t=>{if(t.classList.contains("collection-tab")){const e=t.closest("collection-tabs");e&&e.onTabOpened(t)}})),this.observer=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting?(this.isPausing=!1,this.openNextTab()):(this.isPausing=!0,clearTimeout(this.autoplayTimer))}))})),this.observer.observe(this)),window.MinimogEvents.subscribe("ON_COLLAPSIBLE_TAB_SELECTED",(t=>{if(t.classList.contains("collection-tab")){const e=t.closest("collection-tabs");e&&e.onElementSelected(t)}})),this.hoverToOpen&&this.domNodes.collapsibleTabs.forEach((t=>{t.addEventListener("mouseenter",this.onMouseEnterCollapsibleTabs.bind(this))}))}onElementSelected(t){this.domNodes.images&&this.domNodes.images.forEach(((e,s)=>{t.dataset.blockId===e.dataset.blockId?(this.tabActiveIndex=s,e.classList.add("is-active")):e.classList.remove("is-active")}))}onTabOpened(t){this.isPausing||this.initAutoplay()}initAutoplay(){clearTimeout(this.autoplayTimer),this.autoplayTimer=setTimeout((()=>{this.openNextTab()}),1e3*this.autoplayDuration)}openNextTab(){this.tabActiveIndex=this.totalTabs<=this.tabActiveIndex+1?0:this.tabActiveIndex+1,this.domNodes.collapsibleTabs[this.tabActiveIndex].toggle()}onMouseEnterCollapsibleTabs(t){t.target.toggle(t)}disconnectedCallback(){this.observer&&this.observer.disconnect(),this.hoverToOpen&&this.domNodes.collapsibleTabs.forEach((t=>{t.removeEventListener("mouseenter",this.onMouseEnterCollapsibleTabs.bind(this))}))}}customElements.define("collection-tabs",t)}